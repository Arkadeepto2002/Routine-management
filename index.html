<!DOCTYPE html>
<html>
<head>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
	<link href="styles.css" rel="stylesheet">
	<title>Time Table App</title>
</head>
<body>
	<h1>Routine Management</h1>

	<table class="table table-bordered table-striped table-responsive-md">
		<tr>
			<th>Day</th>
			<th>Period 1</th>
			<th>Period 2</th>
			<th>Period 3</th>
			<th>Period 4</th>
			<th>Period 5</th>
			<th>Period 6</th>
			<th>Period 7</th>
			<th>Period 8</th>
		</tr>
		<tr>
			<td>Monday</td>
			<td	class="period" id="mon-p1" onclick="editPeriod('mon-p1')">Maths</td>
			<td	class="period" id="mon-p2" onclick="editPeriod('mon-p2')">English</td>
			<td	class="period" id="mon-p3" onclick="editPeriod('mon-p3')">Science</td>
			<td	class="period" id="mon-p4" onclick="editPeriod('mon-p4')">History</td>
			<td	class="period" id="mon-p5" onclick="editPeriod('mon-p5')">Geography</td>
			<td	class="period" id="mon-p6" onclick="editPeriod('mon-p6')">Art</td>
			<td	class="period" id="mon-p7" onclick="editPeriod('mon-p7')">Music</td>
			<td	class="period" id="mon-p8" onclick="editPeriod('mon-p8')">PE</td>
		</tr>
		<tr>
			<td>Tuesday</td>
			<td class="period" id="tue-p1" onclick="editPeriod('tue-p1')">English</td>
			<td class="period" id="tue-p2" onclick="editPeriod('tue-p2')">Science</td>
			<td class="period" id="tue-p3" onclick="editPeriod('tue-p3')">Science</td>
			<td class="period" id="tue-p4" onclick="editPeriod('tue-p4')">History</td>
			<td class="period" id="tue-p5" onclick="editPeriod('tue-p5')">Geography</td>
			<td class="period" id="tue-p6" onclick="editPeriod('tue-p6')">Art</td>
			<td class="period" id="tue-p7" onclick="editPeriod('tue-p7')">Music</td>
			<td class="period" id="tue-p8" onclick="editPeriod('tue-p8')">PE</td>
        </tr>
        <tr>
			<td>Wednesday</td>
			<td class="period" id="wed-p1" onclick="editPeriod('wed-p1')">Science</td>
			<td class="period" id="wed-p2" onclick="editPeriod('wed-p2')">Maths</td>
			<td class="period" id="wed-p3" onclick="editPeriod('wed-p3')">History</td>
			<td class="period" id="wed-p4" onclick="editPeriod('wed-p4')">Geography</td>
			<td class="period" id="wed-p5" onclick="editPeriod('wed-p5')">PE</td>
			<td class="period" id="wed-p6" onclick="editPeriod('wed-p6')">Art</td>
			<td class="period" id="wed-p7" onclick="editPeriod('wed-p7')">Music</td>
			<td class="period" id="wed-p8" onclick="editPeriod('wed-p8')">English</td>
		</tr>
		<tr>
			<td>Thursday</td>
			<td class="period" id="thu-p1" onclick="editPeriod('thu-p1')">History</td>
			<td class="period" id="thu-p2" onclick="editPeriod('thu-p2')">Geography</td>
			<td class="period" id="thu-p3" onclick="editPeriod('thu-p3')">English</td>
			<td class="period" id="thu-p4" onclick="editPeriod('thu-p4')">Science</td>
			<td class="period" id="thu-p5" onclick="editPeriod('thu-p5')">Maths</td>
			<td class="period" id="thu-p6" onclick="editPeriod('thu-p6')">PE</td>
			<td class="period" id="thu-p7" onclick="editPeriod('thu-p7')">Music</td>
			<td class="period" id="thu-p8" onclick="editPeriod('thu-p8')">Art</td>
		</tr>
		<tr>
			<td>Friday</td>
			<td class="period" id="fri-p1" onclick="editPeriod('fri-p1')">Geography</td>
			<td class="period" id="fri-p2" onclick="editPeriod('fri-p2')">History</td>
			<td class="period" id="fri-p3" onclick="editPeriod('fri-p3')">English</td>
			<td class="period" id="fri-p4" onclick="editPeriod('fri-p4')">PE</td>
			<td class="period" id="fri-p5" onclick="editPeriod('fri-p5')">Art</td>
			<td class="period" id="fri-p6" onclick="editPeriod('fri-p6')">Maths</td>
			<td class="period" id="fri-p7" onclick="editPeriod('fri-p7')">Music</td>
			<td class="period" id="fri-p8" onclick="editPeriod('fri-p8')">Science</td>
		</tr>
	</table>

	<!-- Modal for editing a period -->
	<div id="edit-modal" class="modal" tabindex="-1">
		<div class="modal-dialog">
		  <div class="modal-content">
			<div class="modal-header">
			  <h5 class="modal-title">Change the data</h5>
			  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<p>Please enter a new value for the period:</p>
				<input type="text" id="edit-input">
			</div>
			<div class="modal-footer">
				<button onclick="saveEdit()">Save</button>
				<button onclick="deletePeriod()">Delete</button>
			</div>
		  </div>
		</div>
	  </div>
	  
	<!-- <div id="edit-modal" class="modal">
		<div class="modal-content">
			<span class="close">&times;</span>
			<p>Please enter a new value for the period:</p>
			<input type="text" id="edit-input">
			<button onclick="saveEdit()">Save</button>
			<button onclick="deletePeriod()">Delete</button>
		</div>
	</div> -->

	<script>
		// Function to display the edit modal when a period is clicked
		
		function editPeriod(periodID) {
			// Get the value of the period and display it in the edit modal
			var periodValue = document.getElementById(periodID).innerHTML;
			document.getElementById("edit-input").value = periodValue;
			document.getElementById("edit-modal").style.display = "block";
			// Store the ID of the clicked period in a global variable so we can access it in the saveEdit and deletePeriod functions
			window.currentPeriodID = periodID;
		}

		// Function to save the edited period
		function saveEdit() {
			// Get the new value for the period from the edit modal
			var newPeriodValue = document.getElementById("edit-input").value;
			// Update the value of the clicked period with the new value
			document.getElementById(window.currentPeriodID).innerHTML = newPeriodValue;
			localStorage.setItem(window.currentPeriodID, newPeriodValue);
			// Hide the edit modal
			document.getElementById("edit-modal").style.display = "none";
		}

		// Function to delete the clicked period
		function deletePeriod() {
			// Confirm with the user that they want to delete the period
			var confirmDelete = confirm("Are you sure you want to delete this period?");
			if (confirmDelete) {
				// Set the value of the clicked period to an empty string
				document.getElementById(window.currentPeriodID).innerHTML = "";
				localStorage.setItem(window.currentPeriodID, "@");
				// Hide the edit modal
				document.getElementById("edit-modal").style.display = "none";
			}
		}

		// Function to close the edit modal when the user clicks the X button
		document.getElementsByClassName("btn-close")[0].onclick = function() {
			document.getElementById("edit-modal").style.display = "none";
		};

		const elements = document.getElementsByClassName('period');
     	 for (let i = 0; i < elements.length; i++) {
		const elementId = elements[i].getAttribute('id');
        const savedValue = localStorage.getItem(elementId);
        if (savedValue && savedValue != "@") {
          elements[i].innerText = savedValue;
        }
		else if(savedValue == "@"){
			elements[i].innerText = "";
		}
    	  }
	</script>

